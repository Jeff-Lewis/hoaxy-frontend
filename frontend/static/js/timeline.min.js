function HoaxyTimeline(e){var t=e.updateDateRangeCallback,a=e.graphAnimation,n={},i=null,c=[],l={};function o(e){return d3.time.format("%x")(new Date(e))}(i=nv.models.lineWithFocusChart().showLegend(!1).useInteractiveGuideline(!0)).interactiveLayer.tooltip.contentGenerator(function(e){var t,a=new Date(e.value).getTime();for(dateRateIx in l[0].values){a===new Date(l[0].values[dateRateIx].x).getTime()&&(t=dateRateIx)}return"<div><b>"+String(e.value)+"</b></div><div style='display:flex; justify-content:left; align-items:center;'> <div style='display:inline-block; margin:5px; width:10px; height:10px; background-color:"+String(colors.edge_colors.claim)+";'> </div> <div>New Claims: "+String(l[0].values[t].y)+"</div> </div><div style='display:flex; justify-content:left; align-items:center;'> <div style='display:inline-block; margin:5px; width:10px; height:10px; background-color:"+String(colors.edge_colors.fact_checking)+";'> </div> <div>New Fact-Checks: "+String(l[1].values[t].y)+"</div> </div>"}),i.margin({right:50,bottom:75}),i.xAxis.tickFormat(o),i.x2Axis.tickFormat(o),i.forceY([0]),i.yAxis.axisLabel("Cumulative Tweets"),i.color([colors.edge_colors.claim,colors.edge_colors.fact_checking,"#00ff00"]);var r=0,s=function(e){clearTimeout(r),r=setTimeout(function(){!function(e){document.getElementById("extent-0")&&(document.getElementById("extent-0").innerHTML=e.extent[0]);document.getElementById("extent-1")&&(document.getElementById("extent-1").innerHTML=e.extent[1]);document.getElementById("extent-00")&&(document.getElementById("extent-00").innerHTML=new Date(e.extent[0]).toISOString());document.getElementById("extent-11")&&(document.getElementById("extent-11").innerHTML=new Date(e.extent[1]).toISOString());var a=e.extent[0],n=e.extent[1];try{t(a,n)}catch(t){"Tried to make graph, but there is no data."===t?console.info(t,"This is not an error."):console.warn(t),setTimeout(function(){s(e)},500)}}(e)},200)};var u=0;return n.removeUpdateDateRangeCallback=function(){i.dispatch.on("brush",null)},n.update=function(e){u=0,e;var t=0;if(!e)return{time:null,factChecking_values:[],fake_values:[]};for(var a in time=e.claim.timestamp,volume_factchecking=e.fact_checking.volume,volume_fake=e.claim.volume,factChecking_values=[],fake_values=[],volume_fake){var n=new Date(time[a]).getTime();volume_factchecking[a]>u&&(u=volume_factchecking[a]),volume_fake[a]>u&&(u=volume_fake[a]),n>t&&(t=n),factChecking_values.push({x:new Date(time[a]),y:volume_factchecking[a]}),fake_values.push({x:new Date(time[a]),y:volume_fake[a]})}c.length=0,i.update&&i.update();var o={key:"Fact-checks",values:factChecking_values,c:colors.edge_colors.fact_checking},r={key:"Claims",values:fake_values,c:colors.edge_colors.claim};c.push(r),c.push(o),function(e){for(var t=0,a=0,n=(l=JSON.parse(JSON.stringify(e)))[0].values.length,i=0;i<n;i++){var c=new Date(l[0].values[i].x),o=c.getFullYear(),r=c.getMonth(),s=c.getDate(),u=new Date(o,r,s);l[0].values[i].x=u,l[1].values[i].x=u;var d=l[0].values[i].y;l[0].values[i].y=d-t,t=d;var m=l[1].values[i].y;l[1].values[i].y=m-a,a=m}}(c);try{d3.select("#chart svg").datum(c).call(i)}catch(e){console.debug(e)}},n.chart=i,n.redraw=function(){i&&(i.dispatch.on("brush",null),d3.select("#chart svg").call(i),i.dispatch.on("brush",s),d3.select("#chart svg .nvd3 > g").attr("transform","translate(0, -10)"))},n.updateDateRange=function(){try{d3.select("#chart svg").datum(c).call(i)}catch(e){console.debug("Error in triggerUpdataRange.",e)}},n.updateTimestamp=function(){a.current_timestamp?c[2]={key:"Time",values:[{x:new Date(a.current_timestamp),y:0},{x:new Date(a.current_timestamp),y:u}],disableTooltip:!0}:delete c[2],i.dispatch.on("brush",null),d3.select("#chart svg").datum(c).call(i),i.dispatch.on("brush",s)},n}